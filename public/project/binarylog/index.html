<!DOCTYPE html>
<html lang="en" dir="ltr"><head>
  
                           
     


<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.102.1" />
<title>Binary Logistic Regression | Dina Arch</title>


<meta property="twitter:site" content="@dnajiarch">
<meta property="twitter:creator" content="@dnajiarch">







  
    
  
<meta name="description" content="This markdown follows along the logistic regression lecture presented in a linear models class and provides two examples to demonstrate the models and their interpretation.">


<meta property="og:site_name" content="Dina Arch">
<meta property="og:title" content="Binary Logistic Regression | Dina Arch">
<meta property="og:description" content="This markdown follows along the logistic regression lecture presented in a linear models class and provides two examples to demonstrate the models and their interpretation." />
<meta property="og:type" content="page" />
<meta property="og:url" content="https://www.dina-arch.com/project/binarylog/" />
<meta property="og:locale" content="en">




    
        <meta property="og:image" content="https://www.dina-arch.com/project/sidebar-listing.jpg" >
        <meta property="twitter:card" content="summary_large_image">
        <meta name="twitter:image" content="https://www.dina-arch.com/project/sidebar-listing.jpg" >
    
    
  <meta itemprop="name" content="Binary Logistic Regression">
<meta itemprop="description" content="library(pander) #pander() library(psych) # describe() library(gtsummary) #tbl_summary() library(equatiomatic) # extract_eq() library(sjPlot) # tab_xtab(), tab_model() library(tidyverse) This lab follows along the logistic regression lecture presented in class and provides two examples to demonstrate the models and their interpretation.
What is Binary Logistic Regression? It is a regression with an outcome variable (or dependent variable) that is dichotomous/binary (i.e., only two categories, such as Yes or No, 0 or 1, Disorder or No Disorder, Win or Lose)."><meta itemprop="datePublished" content="2021-05-30T00:00:00+00:00" />
<meta itemprop="dateModified" content="2021-05-30T00:00:00+00:00" />
<meta itemprop="wordCount" content="3664">
<meta itemprop="keywords" content="r markdown,binary regression,labs,odds ratios,classification," />
  
  
  <!--[if IE]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <link rel="shortcut icon" href="/img/cat.ico" type="image/x-icon">
  <link rel="icon" href="/img/cat.ico" type="image/x-icon">
  
  
  <link rel="stylesheet" href="/style.main.min.51ef9a26ed5e31959c31ea456a050c05fbf3938c97c284a4438715138fcb2e8d.css" integrity="sha256-Ue&#43;aJu1eMZWcMepFagUMBfvzk4yXwoSkQ4cVE4/LLo0=" media="screen">
  
  
  <script src="/panelset.min.ed1ac24b6e16f4e2481e3d1d098ae66f5bc77438aef619e6e266d8ac5b00dc72.js" type="text/javascript"></script>
  
  
  <script src="/main.min.5550fcfd017088ccae55298dd74a3b7d7bfe6cc577b648c443d001196a798ca6.js" type="text/javascript"></script>
</head>
<body>
      <div class="grid-container single">
<header class="site-header pt4 pb2 mb4 bb b--transparent ph5 headroom z-max" role="banner">
  <nav class="site-nav db dt-l w-100" role="navigation">
    <a class="site-brand db dtc-l v-mid link no-underline w-100 w-33-l tc tl-l" href="https://www.dina-arch.com" title="Home">
      <img src="/img/cat.ico" class="dib db-l h2 w-auto" alt="Dina Arch">
    </a>
    <div class="site-links db dtc-l v-mid w-100 w-47-l tc tr-l mt3 mt0-l ttu tracked">
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/" title="Home">Home</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/collection/" title="Project Portfolio">R Projects</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="https://ucsb.box.com/s/ihm263kmu5wm2ko9ar0eju849qdqwb73" title="CV">CV</a>
      
      
    </div>
  </nav>
</header>

<main class="page-main pa4" role="main">
  <section class="page-content mw7 center">
    <article class="post-content pa0 ph4-l">
      <header class="post-header">
        <h1 class="f1 lh-solid measure-narrow mb3 fw4">Binary Logistic Regression</h1>
        <h4 class="f4 mt0 mb4 lh-title measure">This markdown follows along the logistic regression lecture presented in a linear models class and provides two examples to demonstrate the models and their interpretation.</h4>
        <p class="f6 measure lh-copy mv1">By Dina Arch in <a href="https://www.dina-arch.com/categories/statistics">statistics</a>  <a href="https://www.dina-arch.com/categories/r">r</a> </p>
        <p class="f7 db mv0 ttu">May 30, 2021</p>

      

      </header>
      <section class="post-body pt5 pb4">
        <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#900;font-weight:bold">library</span>(pander) <span style="color:#998;font-style:italic">#pander()</span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">library</span>(psych) <span style="color:#998;font-style:italic"># describe()</span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">library</span>(gtsummary) <span style="color:#998;font-style:italic">#tbl_summary()</span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">library</span>(equatiomatic) <span style="color:#998;font-style:italic"># extract_eq()</span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">library</span>(sjPlot) <span style="color:#998;font-style:italic"># tab_xtab(), tab_model()</span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">library</span>(tidyverse)
</span></span></code></pre></div><p>This lab follows along the logistic regression lecture presented in class and provides two examples to demonstrate the models and their interpretation.</p>




<h1 id="what-is-binary-logistic-regression">What is Binary Logistic Regression?
  <a href="#what-is-binary-logistic-regression"></a>
</h1>
<ul>
<li>
<p>It is a regression with an <strong>outcome</strong> <strong>variable</strong> (or <strong>dependent variable</strong>) that is dichotomous/binary (i.e., only two categories, such as Yes or No, 0 or 1, Disorder or No Disorder, Win or Lose).</p>
<ul>
<li>The <strong>predictor variables</strong> (or <strong>independent variables</strong> or <strong>explanatory variables</strong>) can be either continuous or categorical</li>
</ul>
</li>
<li>
<p>In binary logistic regression, we are interested in predicting which of two possible events (e.g., win or lose) are going to happen given the predictor(s) variables</p>
</li>
<li>
<p>Assumes a binomial distribution or “a probability distribution that summarizes the likelihood that a value will take one of two independent values under a given set of parameters or assumptions.” (
<a href="https://www.investopedia.com/terms/b/binomialdistribution.asp" target="_blank" rel="noopener">Source</a>)</p>
</li>
</ul>




<h1 id="binary-logistic-regression-in-r">Binary Logistic Regression in R
  <a href="#binary-logistic-regression-in-r"></a>
</h1>




<h2 id="admissions-example">Admissions Example
  <a href="#admissions-example"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>This example comes from the UCLA Statistical Consulting page found 
<a href="https://stats.idre.ucla.edu/r/dae/logit-regression/" target="_blank" rel="noopener">here</a>.
This example assesses how GRE, GPA, and prestige of the undergraduate institutions effect graduate school admission.</p>
<table>
<thead>
<tr>
<th><strong>Variable</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>gre</td>
<td>Graduate Record Exam (GRE) scores, <em>continuous</em></td>
</tr>
<tr>
<td>gpa</td>
<td>Grade point average, <em>continuous</em></td>
</tr>
<tr>
<td>rank</td>
<td>Rank of undergraduate institutions, 1 = highest prestige, 4 = lowest, <em>categorical</em></td>
</tr>
<tr>
<td>admit</td>
<td>Admission decision, 0 = did not admit, 1 = admitted, <em>binary</em></td>
</tr>
</tbody>
</table>
<p><strong>References</strong></p>
<p>Hosmer, D.
&amp; Lemeshow, S.
(2000).
Applied Logistic Regression (Second Edition).
New York: John Wiley &amp; Sons, Inc.</p>
<p>Long, J. Scott (1997).
Regression Models for Categorical and Limited Dependent Variables.
Thousand Oaks, CA: Sage Publications.</p>




<h3 id="read-in-data">Read in data
  <a href="#read-in-data"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>log <span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">read.csv</span>(<span style="color:#d14">&#34;https://stats.idre.ucla.edu/stat/data/binary.csv&#34;</span>) <span style="color:#000;font-weight:bold">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#900;font-weight:bold">mutate</span>(rank <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">factor</span>(rank),  <span style="color:#998;font-style:italic">#we need to convert this variable to a factor</span>
</span></span><span style="display:flex;"><span>         admit <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">factor</span>(admit, levels <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">c</span>(<span style="color:#d14">&#34;0&#34;</span>, <span style="color:#d14">&#34;1&#34;</span>), labels <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">c</span>(<span style="color:#d14">&#34;Not Admitted&#34;</span>, <span style="color:#d14">&#34;Admitted&#34;</span>))) <span style="color:#998;font-style:italic"># add labels to outcome</span>
</span></span></code></pre></div>



<h3 id="summary">Summary
  <a href="#summary"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># psych::describe()</span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">round</span>(<span style="color:#900;font-weight:bold">describe</span>(log),<span style="color:#099">2</span>) <span style="color:#000;font-weight:bold">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#900;font-weight:bold">pander</span>() 
</span></span></code></pre></div><table>
<thead>
<tr>
<th style="text-align:center"> </th>
<th style="text-align:center">vars</th>
<th style="text-align:center">n</th>
<th style="text-align:center">mean</th>
<th style="text-align:center">sd</th>
<th style="text-align:center">median</th>
<th style="text-align:center">trimmed</th>
<th style="text-align:center">mad</th>
<th style="text-align:center">min</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>admit</strong>*</td>
<td style="text-align:center">1</td>
<td style="text-align:center">400</td>
<td style="text-align:center">1.32</td>
<td style="text-align:center">0.47</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1.27</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center"><strong>gre</strong></td>
<td style="text-align:center">2</td>
<td style="text-align:center">400</td>
<td style="text-align:center">587.7</td>
<td style="text-align:center">115.5</td>
<td style="text-align:center">580</td>
<td style="text-align:center">589.1</td>
<td style="text-align:center">118.6</td>
<td style="text-align:center">220</td>
</tr>
<tr>
<td style="text-align:center"><strong>gpa</strong></td>
<td style="text-align:center">3</td>
<td style="text-align:center">400</td>
<td style="text-align:center">3.39</td>
<td style="text-align:center">0.38</td>
<td style="text-align:center">3.4</td>
<td style="text-align:center">3.4</td>
<td style="text-align:center">0.4</td>
<td style="text-align:center">2.26</td>
</tr>
<tr>
<td style="text-align:center"><strong>rank</strong>*</td>
<td style="text-align:center">4</td>
<td style="text-align:center">400</td>
<td style="text-align:center">2.48</td>
<td style="text-align:center">0.94</td>
<td style="text-align:center">2</td>
<td style="text-align:center">2.48</td>
<td style="text-align:center">1.48</td>
<td style="text-align:center">1</td>
</tr>
</tbody>
</table>
<p>Table continues below</p>
<table>
<thead>
<tr>
<th style="text-align:center"> </th>
<th style="text-align:center">max</th>
<th style="text-align:center">range</th>
<th style="text-align:center">skew</th>
<th style="text-align:center">kurtosis</th>
<th style="text-align:center">se</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>admit</strong>*</td>
<td style="text-align:center">2</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0.78</td>
<td style="text-align:center">-1.39</td>
<td style="text-align:center">0.02</td>
</tr>
<tr>
<td style="text-align:center"><strong>gre</strong></td>
<td style="text-align:center">800</td>
<td style="text-align:center">580</td>
<td style="text-align:center">-0.14</td>
<td style="text-align:center">-0.36</td>
<td style="text-align:center">5.78</td>
</tr>
<tr>
<td style="text-align:center"><strong>gpa</strong></td>
<td style="text-align:center">4</td>
<td style="text-align:center">1.74</td>
<td style="text-align:center">-0.21</td>
<td style="text-align:center">-0.6</td>
<td style="text-align:center">0.02</td>
</tr>
<tr>
<td style="text-align:center"><strong>rank</strong>*</td>
<td style="text-align:center">4</td>
<td style="text-align:center">3</td>
<td style="text-align:center">0.1</td>
<td style="text-align:center">-0.91</td>
<td style="text-align:center">0.05</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># I like this table more, but you can do either! Especially if you&#39;re getting some errors with gtsummary(). </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># gtsummary::tbl_summary()</span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">tbl_summary</span>(log,
</span></span><span style="display:flex;"><span>            statistic <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">list</span>(<span style="color:#900;font-weight:bold">all_continuous</span>() <span style="color:#000;font-weight:bold">~</span> <span style="color:#d14">&#34;{mean} ({sd})&#34;</span>),
</span></span><span style="display:flex;"><span>                             missing <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;no&#34;</span>)
</span></span></code></pre></div><div id="eywbxlvego" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}
<p>#eywbxlvego .gt_table {
display: table;
border-collapse: collapse;
margin-left: auto;
margin-right: auto;
color: #333333;
font-size: 16px;
font-weight: normal;
font-style: normal;
background-color: #FFFFFF;
width: auto;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #A8A8A8;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #A8A8A8;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
}</p>
<p>#eywbxlvego .gt_heading {
background-color: #FFFFFF;
text-align: center;
border-bottom-color: #FFFFFF;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
}</p>
<p>#eywbxlvego .gt_title {
color: #333333;
font-size: 125%;
font-weight: initial;
padding-top: 4px;
padding-bottom: 4px;
padding-left: 5px;
padding-right: 5px;
border-bottom-color: #FFFFFF;
border-bottom-width: 0;
}</p>
<p>#eywbxlvego .gt_subtitle {
color: #333333;
font-size: 85%;
font-weight: initial;
padding-top: 0;
padding-bottom: 6px;
padding-left: 5px;
padding-right: 5px;
border-top-color: #FFFFFF;
border-top-width: 0;
}</p>
<p>#eywbxlvego .gt_bottom_border {
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}</p>
<p>#eywbxlvego .gt_col_headings {
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
}</p>
<p>#eywbxlvego .gt_col_heading {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: normal;
text-transform: inherit;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: bottom;
padding-top: 5px;
padding-bottom: 6px;
padding-left: 5px;
padding-right: 5px;
overflow-x: hidden;
}</p>
<p>#eywbxlvego .gt_column_spanner_outer {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: normal;
text-transform: inherit;
padding-top: 0;
padding-bottom: 0;
padding-left: 4px;
padding-right: 4px;
}</p>
<p>#eywbxlvego .gt_column_spanner_outer:first-child {
padding-left: 0;
}</p>
<p>#eywbxlvego .gt_column_spanner_outer:last-child {
padding-right: 0;
}</p>
<p>#eywbxlvego .gt_column_spanner {
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
vertical-align: bottom;
padding-top: 5px;
padding-bottom: 5px;
overflow-x: hidden;
display: inline-block;
width: 100%;
}</p>
<p>#eywbxlvego .gt_group_heading {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: middle;
}</p>
<p>#eywbxlvego .gt_empty_group_heading {
padding: 0.5px;
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
vertical-align: middle;
}</p>
<p>#eywbxlvego .gt_from_md &gt; :first-child {
margin-top: 0;
}</p>
<p>#eywbxlvego .gt_from_md &gt; :last-child {
margin-bottom: 0;
}</p>
<p>#eywbxlvego .gt_row {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
margin: 10px;
border-top-style: solid;
border-top-width: 1px;
border-top-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: middle;
overflow-x: hidden;
}</p>
<p>#eywbxlvego .gt_stub {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-right-style: solid;
border-right-width: 2px;
border-right-color: #D3D3D3;
padding-left: 5px;
padding-right: 5px;
}</p>
<p>#eywbxlvego .gt_stub_row_group {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-right-style: solid;
border-right-width: 2px;
border-right-color: #D3D3D3;
padding-left: 5px;
padding-right: 5px;
vertical-align: top;
}</p>
<p>#eywbxlvego .gt_row_group_first td {
border-top-width: 2px;
}</p>
<p>#eywbxlvego .gt_summary_row {
color: #333333;
background-color: #FFFFFF;
text-transform: inherit;
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
}</p>
<p>#eywbxlvego .gt_first_summary_row {
border-top-style: solid;
border-top-color: #D3D3D3;
}</p>
<p>#eywbxlvego .gt_first_summary_row.thick {
border-top-width: 2px;
}</p>
<p>#eywbxlvego .gt_last_summary_row {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}</p>
<p>#eywbxlvego .gt_grand_summary_row {
color: #333333;
background-color: #FFFFFF;
text-transform: inherit;
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
}</p>
<p>#eywbxlvego .gt_first_grand_summary_row {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
border-top-style: double;
border-top-width: 6px;
border-top-color: #D3D3D3;
}</p>
<p>#eywbxlvego .gt_striped {
background-color: rgba(128, 128, 128, 0.05);
}</p>
<p>#eywbxlvego .gt_table_body {
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}</p>
<p>#eywbxlvego .gt_footnotes {
color: #333333;
background-color: #FFFFFF;
border-bottom-style: none;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
}</p>
<p>#eywbxlvego .gt_footnote {
margin: 0px;
font-size: 90%;
padding-left: 4px;
padding-right: 4px;
padding-left: 5px;
padding-right: 5px;
}</p>
<p>#eywbxlvego .gt_sourcenotes {
color: #333333;
background-color: #FFFFFF;
border-bottom-style: none;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
}</p>
<p>#eywbxlvego .gt_sourcenote {
font-size: 90%;
padding-top: 4px;
padding-bottom: 4px;
padding-left: 5px;
padding-right: 5px;
}</p>
<p>#eywbxlvego .gt_left {
text-align: left;
}</p>
<p>#eywbxlvego .gt_center {
text-align: center;
}</p>
<p>#eywbxlvego .gt_right {
text-align: right;
font-variant-numeric: tabular-nums;
}</p>
<p>#eywbxlvego .gt_font_normal {
font-weight: normal;
}</p>
<p>#eywbxlvego .gt_font_bold {
font-weight: bold;
}</p>
<p>#eywbxlvego .gt_font_italic {
font-style: italic;
}</p>
<p>#eywbxlvego .gt_super {
font-size: 65%;
}</p>
<p>#eywbxlvego .gt_two_val_uncert {
display: inline-block;
line-height: 1em;
text-align: right;
font-size: 60%;
vertical-align: -0.25em;
margin-left: 0.1em;
}</p>
<p>#eywbxlvego .gt_footnote_marks {
font-style: italic;
font-weight: normal;
font-size: 75%;
vertical-align: 0.4em;
}</p>
<p>#eywbxlvego .gt_asterisk {
font-size: 100%;
vertical-align: 0;
}</p>
<p>#eywbxlvego .gt_slash_mark {
font-size: 0.7em;
line-height: 0.7em;
vertical-align: 0.15em;
}</p>
<p>#eywbxlvego .gt_fraction_numerator {
font-size: 0.6em;
line-height: 0.6em;
vertical-align: 0.45em;
}</p>
<p>#eywbxlvego .gt_fraction_denominator {
font-size: 0.6em;
line-height: 0.6em;
vertical-align: -0.05em;
}
</style></p>
<table class="gt_table">
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>N = 400</strong><sup class="gt_footnote_marks">1</sup></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">admit</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Not Admitted</td>
<td class="gt_row gt_center">273 (68%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Admitted</td>
<td class="gt_row gt_center">127 (32%)</td></tr>
    <tr><td class="gt_row gt_left">gre</td>
<td class="gt_row gt_center">588 (116)</td></tr>
    <tr><td class="gt_row gt_left">gpa</td>
<td class="gt_row gt_center">3.39 (0.38)</td></tr>
    <tr><td class="gt_row gt_left">rank</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">1</td>
<td class="gt_row gt_center">61 (15%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2</td>
<td class="gt_row gt_center">151 (38%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">3</td>
<td class="gt_row gt_center">121 (30%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">4</td>
<td class="gt_row gt_center">67 (17%)</td></tr>
  </tbody>
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="2"><sup class="gt_footnote_marks">1</sup> n (%); Mean (SD)</td>
    </tr>
  </tfoot>
</table>
</div>




<h3 id="contingency-table">Contingency Table
  <a href="#contingency-table"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Contingency tables, sometimes called cross tabulations or cross tabs, that displays the frequency distribution of your <strong>categorical</strong> variables.
In R, we use <code>sjPlot::tab_xtabs()</code> (Found by Karen!).
We want to check the contingency table to make sure there are values in each cell.
Since we only have one categorical variable, <code>rank</code>, we only need to check one contingency table.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>sjPlot<span style="color:#000;font-weight:bold">::</span><span style="color:#900;font-weight:bold">tab_xtab</span>(var.row <span style="color:#000;font-weight:bold">=</span> log<span style="color:#000;font-weight:bold">$</span>rank, var.col <span style="color:#000;font-weight:bold">=</span> log<span style="color:#000;font-weight:bold">$</span>admit, title <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;Cross tab of Admit rate by Rank of Undergraduate Insitute&#34;</span>, show.row.prc <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">TRUE</span>, show.summary<span style="color:#000;font-weight:bold">=</span><span style="color:#999">F</span>)
</span></span></code></pre></div><table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">
Cross tab of Admit rate by Rank of Undergraduate Insitute
</caption>
<tr>
<th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; border-bottom:1px solid;" rowspan="2">
rank
</th>
<th style="border-top:double; text-align:center; font-style:italic; font-weight:normal;" colspan="2">
admit
</th>
<th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; font-weight:bolder; font-style:italic; border-bottom:1px solid; " rowspan="2">
Total
</th>
</tr>
<tr>
<td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">
Not Admitted
</td>
<td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">
Admitted
</td>
</tr>
<tr>
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">
1
</td>
<td style="padding:0.2cm; text-align:center; ">
<span style="color:black;">28</span><br><span style="color:#333399;">45.9 %</span>
</td>
<td style="padding:0.2cm; text-align:center; ">
<span style="color:black;">33</span><br><span style="color:#333399;">54.1 %</span>
</td>
<td style="padding:0.2cm; text-align:center;  ">
<span style="color:black;">61</span><br><span style="color:#333399;">100 %</span>
</td>
</tr>
<tr>
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">
2
</td>
<td style="padding:0.2cm; text-align:center; ">
<span style="color:black;">97</span><br><span style="color:#333399;">64.2 %</span>
</td>
<td style="padding:0.2cm; text-align:center; ">
<span style="color:black;">54</span><br><span style="color:#333399;">35.8 %</span>
</td>
<td style="padding:0.2cm; text-align:center;  ">
<span style="color:black;">151</span><br><span style="color:#333399;">100 %</span>
</td>
</tr>
<tr>
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">
3
</td>
<td style="padding:0.2cm; text-align:center; ">
<span style="color:black;">93</span><br><span style="color:#333399;">76.9 %</span>
</td>
<td style="padding:0.2cm; text-align:center; ">
<span style="color:black;">28</span><br><span style="color:#333399;">23.1 %</span>
</td>
<td style="padding:0.2cm; text-align:center;  ">
<span style="color:black;">121</span><br><span style="color:#333399;">100 %</span>
</td>
</tr>
<tr>
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">
4
</td>
<td style="padding:0.2cm; text-align:center; ">
<span style="color:black;">55</span><br><span style="color:#333399;">82.1 %</span>
</td>
<td style="padding:0.2cm; text-align:center; ">
<span style="color:black;">12</span><br><span style="color:#333399;">17.9 %</span>
</td>
<td style="padding:0.2cm; text-align:center;  ">
<span style="color:black;">67</span><br><span style="color:#333399;">100 %</span>
</td>
</tr>
<tr>
<td style="padding:0.2cm;  border-bottom:double; font-weight:bolder; font-style:italic; text-align:left; vertical-align:middle;">
Total
</td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;">
<span style="color:black;">273</span><br><span style="color:#333399;">68.2 %</span>
</td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;">
<span style="color:black;">127</span><br><span style="color:#333399;">31.8 %</span>
</td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;">
<span style="color:black;">400</span><br><span style="color:#333399;">100 %</span>
</td>
</tr>
</table>
<p>This table shows the row and column totals, as well as row percentages.
You can also ask for column percentages, if you prefer.</p>




<h3 id="binary-logistic-model">Binary Logistic Model
  <a href="#binary-logistic-model"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Recall in linear regression, we used the <code>lm()</code> function.
With logistic regression, we use <code>glm()</code>, or general linear model.
The set up is similar to linear regression, however.
One important note is to make sure we identify the type of “family function,” or the description of the error distribution used in the model.
For logistic regression, it’s <code>family = &quot;binomial&quot;</code>.</p>
<p>In our example, the predictors are GRE scores, GPA, and university rank related to graduate school admission status.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>mylogit <span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">glm</span>(admit <span style="color:#000;font-weight:bold">~</span> gre <span style="color:#000;font-weight:bold">+</span> gpa <span style="color:#000;font-weight:bold">+</span> rank, data <span style="color:#000;font-weight:bold">=</span> log, family <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;binomial&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">summary</span>(mylogit)
</span></span></code></pre></div><pre><code>## 
## Call:
## glm(formula = admit ~ gre + gpa + rank, family = &quot;binomial&quot;, 
##     data = log)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -1.6268  -0.8662  -0.6388   1.1490   2.0790  
## 
## Coefficients:
##              Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -3.989979   1.139951  -3.500 0.000465 ***
## gre          0.002264   0.001094   2.070 0.038465 *  
## gpa          0.804038   0.331819   2.423 0.015388 *  
## rank2       -0.675443   0.316490  -2.134 0.032829 *  
## rank3       -1.340204   0.345306  -3.881 0.000104 ***
## rank4       -1.551464   0.417832  -3.713 0.000205 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 499.98  on 399  degrees of freedom
## Residual deviance: 458.52  on 394  degrees of freedom
## AIC: 470.52
## 
## Number of Fisher Scoring iterations: 4
</code></pre>
<p>Let’s dissect this output.
It looks similar to regular simple linear regression but interpretation is different (as we saw in lecture).
When looking at the coefficients, we see <code>gre</code>, <code>gpa</code>, and the levels of <code>rank</code> are significant predictors of admission status.</p>
<p>With binary logistic regression, regression coefficient is the change in the log odds of the outcome for a one unit increase in the predictor variable, holding others constant.
The intercept is the log odds for students who has zero on all the predictors, a value not observed in this sample (e.g., no one has GPA or GRE score of zero).</p>
<p>So this is how we would interpret those same variables when running a logistic regression model (Note: it’s a z-statistic now since these are standardized coefficients):</p>
<ul>
<li>GRE was significantly related to admission decision (<em>z</em> = 2.070, <em>p</em> = 0.038). Specifically, the results indicate that for every one-unit increase in GRE score, there is an increase of <em>B</em> = 0.002 in the <strong>the log odds</strong> of being admitted to graduate school, controlling for GPA and university rank.</li>
</ul>
<p>Additionally, this is how we would interpret the categorical variable <code>rank</code>.
Note that because this is a categorical variable, we are comparing the categories to a comparison group (or a reference group).
In this example, the comparison group is <strong>rank 1</strong>:</p>
<ul>
<li>Students who attended rank 2 universities are less likely to be admitted to graduate school, compared to rank 1 universities (<em>z</em> = -0.675, <em>p</em> = 0.033).</li>
</ul>
<p>The log odds, or <em>logits</em>, are not always easily interpreted and can be converted to odds ratios for easier interpretation.</p>




<h3 id="odds-ratios">Odds Ratios
  <a href="#odds-ratios"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>The coefficients presented above are log odds.
To convert them to odd ratios, we take the exponent of the coefficients (Slide 21 in lecture):</p>
<p>$$
odds ratio = e^{\beta}
$$</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#998;font-style:italic">#coverting the log odds (logits) to odds ratios</span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">exp</span>(<span style="color:#900;font-weight:bold">coef</span>(mylogit))
</span></span></code></pre></div><pre><code>## (Intercept)         gre         gpa       rank2       rank3       rank4 
##   0.0185001   1.0022670   2.2345448   0.5089310   0.2617923   0.2119375
</code></pre>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#998;font-style:italic">## odds ratios and 95% CI</span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">exp</span>(<span style="color:#900;font-weight:bold">cbind</span>(OR <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">coef</span>(mylogit), <span style="color:#900;font-weight:bold">confint</span>(mylogit)))
</span></span></code></pre></div><pre><code>##                    OR       2.5 %    97.5 %
## (Intercept) 0.0185001 0.001889165 0.1665354
## gre         1.0022670 1.000137602 1.0044457
## gpa         2.2345448 1.173858216 4.3238349
## rank2       0.5089310 0.272289674 0.9448343
## rank3       0.2617923 0.131641717 0.5115181
## rank4       0.2119375 0.090715546 0.4706961
</code></pre>
<p>These values likely make <em>a little more</em> sense.
Considering GRE in the example again:</p>
<ul>
<li>GRE was significantly related to admission decision (<strong>z</strong> = 2.070, <em>p</em> = 0.038). Specifically, for every one-unit increase in GRE score, <strong>the odds</strong> <strong>of being admitted to graduate school increase by a factor of 1.002</strong>, controlling for GPA and university rank. (Note this is a very small amount because one point increase in GRE doesn’t represent a large difference).</li>
</ul>
<p>Said differently,</p>
<ul>
<li>GRE was significantly related to admission decision (<strong>z</strong> = 2.070, <em>p</em> = 0.038). Specifically, for every one-unit increase in GRE score, <strong>we expect to see about a .002% increase in the odds of being admitted to graduate school</strong>, controlling for GPA and university rank.</li>
</ul>




<h3 id="predicted-probability">Predicted Probability
  <a href="#predicted-probability"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>To make the coefficients easier to interpret, we can take the odds ratio values and convert them to probabilities.
To do this, we take the odds ratio and divide it by the odds ratio plus 1 (See slide 25):</p>
<p>$$
probability = \frac{odds}{odds + 1}
$$</p>
<p>Before we dive right into conversions, we could also calculate the <strong>predicted probabilities</strong> of admission for specific values of the the predictors.
Recall in lecture (Slide 23) to find the log odds of an x-value, we want to plug it into our regression equation:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#900;font-weight:bold">extract_eq</span>(mylogit, use_coefs <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">TRUE</span>)
</span></span></code></pre></div><p>$$
\log\left[ \frac { \widehat{P( \operatorname{admit} = \operatorname{Admitted} )} }{ 1 - \widehat{P( \operatorname{admit} = \operatorname{Admitted} )} } \right] = -3.99 + 0(\operatorname{gre}) + 0.8(\operatorname{gpa}) - 0.68(\operatorname{rank}<em>{\operatorname{2}}) - 1.34(\operatorname{rank}</em>{\operatorname{3}}) - 1.55(\operatorname{rank}_{\operatorname{4}})
$$</p>
<p>To create predicted probabilities, we need to create a new data frame with the x-value we want the independent variables to take on to create our predictions (In lecture, slide 23, the value was <em>SurvRate</em> = 40).
For this example, let’s use the mean.
And since we have a <strong>categorical</strong> predictor, <code>rank</code>, lets look at the mean of <code>gre</code> and <code>gpa</code> and each value of university <code>rank</code>.
We could, of course, do all the calculations by hand.
But R is easier :)</p>
<p>Let’s first create the data frame using <code>with</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>pred_prob <span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">with</span>(log, <span style="color:#900;font-weight:bold">data.frame</span>(gre <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">mean</span>(gre), gpa <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">mean</span>(gpa), rank <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">factor</span>(<span style="color:#099">1</span><span style="color:#000;font-weight:bold">:</span><span style="color:#099">4</span>)))
</span></span><span style="display:flex;"><span>pred_prob
</span></span></code></pre></div><pre><code>##     gre    gpa rank
## 1 587.7 3.3899    1
## 2 587.7 3.3899    2
## 3 587.7 3.3899    3
## 4 587.7 3.3899    4
</code></pre>
<p>So we have our mean of <code>gpa</code> and <code>gre</code> and each level of <code>rank</code>.
Which means we are going to get <em>four</em> predicted probabilities, at the mean of the other two variables.
If we did not have a categorical predictor, we would only have <em>one.</em></p>
<p>Now let’s create the predicted probabilities using the mean of <code>gre</code> and <code>gpa</code> and each level of <code>rank</code> using the <code>predict()</code> function.
What R is doing here is taking the logits from <code>mylogit</code> and converting them to predicted probabilities based on the values we provided in <code>pred_prob</code>.
We identify the object as <code>pred_prob$rankP</code> to create a new column of the within the <code>pred_prob</code> dataset called <code>rankP</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>pred_prob<span style="color:#000;font-weight:bold">$</span>rankP <span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">predict</span>(mylogit, newdata <span style="color:#000;font-weight:bold">=</span> pred_prob, type <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;response&#34;</span>)
</span></span><span style="display:flex;"><span>pred_prob
</span></span></code></pre></div><pre><code>##     gre    gpa rank     rankP
## 1 587.7 3.3899    1 0.5166016
## 2 587.7 3.3899    2 0.3522846
## 3 587.7 3.3899    3 0.2186120
## 4 587.7 3.3899    4 0.1846684
</code></pre>
<p>Great!
Now we have predicted probabilities.
Here is our interpretation:</p>
<ul>
<li>For those with an average GPA and GRE score (holding GPA and GRE constant), the predicted probabilities of being accepted into a graduate program is .516 for those in the highest ranked undergraduate institutions (rank = 1) and .184 for students from the lowest ranked undergraduate institutions (rank=4). This demonstrates the relation of rank of the university in the probability of being admitted to graduate school.</li>
</ul>




<h3 id="classification-table">Classification Table
  <a href="#classification-table"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>A classification table is similar to a contingency table, but in this table we compare the actual values to the predicted values based on the binary logistic regression model.
This is a way to see how well the model did at predicting the outcome of being admitted to graduate school.</p>
<p>In this code, we take actual fitted values from the model (<code>mylogit$fitted.values</code>), and separate them by a cut off of <em>p</em> = .5.
Those who had a fitted value of above .50 were assigned “Admitted.” We are comparing the values given by the model (fitted values) and whether or not they actually got admitted.
The purpose of this is to see how effective our model is at predicting admission status</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># Converting from probability to actual output</span>
</span></span><span style="display:flex;"><span>log<span style="color:#000;font-weight:bold">$</span>fitted_admit <span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">ifelse</span>(mylogit<span style="color:#000;font-weight:bold">$</span>fitted.values <span style="color:#000;font-weight:bold">&gt;=</span> <span style="color:#099">0.5</span>, <span style="color:#d14">&#34;1&#34;</span>, <span style="color:#d14">&#34;0&#34;</span>) <span style="color:#998;font-style:italic">#1 = Admitted, 0 = Not Admitted</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># Generating the classification table</span>
</span></span><span style="display:flex;"><span>ctab <span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">table</span>(log<span style="color:#000;font-weight:bold">$</span>admit, log<span style="color:#000;font-weight:bold">$</span>fitted_admit)
</span></span><span style="display:flex;"><span>ctab
</span></span></code></pre></div><pre><code>##               
##                  0   1
##   Not Admitted 254  19
##   Admitted      97  30
</code></pre>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#998;font-style:italic">#I (Karen) like this table better because it include row and column totals</span>
</span></span><span style="display:flex;"><span>sjPlot<span style="color:#000;font-weight:bold">::</span><span style="color:#900;font-weight:bold">tab_xtab</span>(var.row <span style="color:#000;font-weight:bold">=</span> log<span style="color:#000;font-weight:bold">$</span>admit, var.col <span style="color:#000;font-weight:bold">=</span> log<span style="color:#000;font-weight:bold">$</span>fitted_admit, title <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;Observed Admission versus Predited Admission counts&#34;</span>, show.row.prc <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">TRUE</span>, show.summary <span style="color:#000;font-weight:bold">=</span> <span style="color:#999">F</span> )
</span></span></code></pre></div><table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">
Observed Admission versus Predited Admission counts
</caption>
<tr>
<th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; border-bottom:1px solid;" rowspan="2">
admit
</th>
<th style="border-top:double; text-align:center; font-style:italic; font-weight:normal;" colspan="2">
fitted_admit
</th>
<th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; font-weight:bolder; font-style:italic; border-bottom:1px solid; " rowspan="2">
Total
</th>
</tr>
<tr>
<td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">
0
</td>
<td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">
1
</td>
</tr>
<tr>
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">
Not Admitted
</td>
<td style="padding:0.2cm; text-align:center; ">
<span style="color:black;">254</span><br><span style="color:#333399;">93 %</span>
</td>
<td style="padding:0.2cm; text-align:center; ">
<span style="color:black;">19</span><br><span style="color:#333399;">7 %</span>
</td>
<td style="padding:0.2cm; text-align:center;  ">
<span style="color:black;">273</span><br><span style="color:#333399;">100 %</span>
</td>
</tr>
<tr>
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">
Admitted
</td>
<td style="padding:0.2cm; text-align:center; ">
<span style="color:black;">97</span><br><span style="color:#333399;">76.4 %</span>
</td>
<td style="padding:0.2cm; text-align:center; ">
<span style="color:black;">30</span><br><span style="color:#333399;">23.6 %</span>
</td>
<td style="padding:0.2cm; text-align:center;  ">
<span style="color:black;">127</span><br><span style="color:#333399;">100 %</span>
</td>
</tr>
<tr>
<td style="padding:0.2cm;  border-bottom:double; font-weight:bolder; font-style:italic; text-align:left; vertical-align:middle;">
Total
</td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;">
<span style="color:black;">351</span><br><span style="color:#333399;">87.8 %</span>
</td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;">
<span style="color:black;">49</span><br><span style="color:#333399;">12.2 %</span>
</td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;">
<span style="color:black;">400</span><br><span style="color:#333399;">100 %</span>
</td>
</tr>
</table>
<p>Here, we can see that the model correctly predicted 30 of 127, or 23.6%, of the students that actually got admitted.
Thus, it misclassified 76.4% (97) of the admitted students were predicted to be “not admitted.” Additionally, we see that it correctly classified 254 of 273 (93%) of the not admitted students.
Thus this model did a better job at predicting who was not admitted than those who were admitted.</p>




<h3 id="accuracy">Accuracy
  <a href="#accuracy"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>We can check the accuracy percentage:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>accuracy <span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">sum</span>(<span style="color:#900;font-weight:bold">diag</span>(ctab))<span style="color:#000;font-weight:bold">/</span><span style="color:#900;font-weight:bold">sum</span>(ctab)<span style="color:#000;font-weight:bold">*</span><span style="color:#099">100</span>
</span></span><span style="display:flex;"><span>accuracy
</span></span></code></pre></div><pre><code>## [1] 71
</code></pre>
<p>Overall, the accuracy of our model is 71%, or our logistic model is able to classify 71% of the observations correctly.</p>




<h2 id="hierarchical-model-building-with-logistic-regression">Hierarchical model building with logistic regression
  <a href="#hierarchical-model-building-with-logistic-regression"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>Just as we did in linear regression, we can proceed through a model building process with logistic regression.
In this context, we are interested in seeing how we can improve the prediction of the outcome in a hierarchical fashion.</p>
<p>Let’s say we fit the following models:</p>
<ol>
<li>
<p>Predicting admission from just GPA (log1)</p>
</li>
<li>
<p>Predicting admission from GPA and GRE (log2)</p>
</li>
<li>
<p>Predicting admission using GPA, GRE, and rank (log3)</p>
</li>
</ol>
<p>We can create a table of all three models using <code>tab_model</code> of the <code>sjPlot</code> package.
We can compare the R2 estimates across the models.
Using the <code>anova</code>function, we can also test if there is a statistical improvement in fit by adding the predictor(s).
In logistic regression models, we test if the residual deviance significant decreases.
We are using the ANOVA function, but it’s not an ANOVA test like you may have done before.
In this case, we are using ANOVA to compare the deviance for each model to the subsequent model.
If the chi-square value is significant we can interpret that the addition of the extra variables (going from log1 to log 2, for example) significantly improves the model prediction (e.g., lowers the residual variance).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>log1 <span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">glm</span>(admit <span style="color:#000;font-weight:bold">~</span> gpa , data <span style="color:#000;font-weight:bold">=</span> log, family <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;binomial&#34;</span>)
</span></span><span style="display:flex;"><span>log2 <span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">glm</span>(admit <span style="color:#000;font-weight:bold">~</span> gpa <span style="color:#000;font-weight:bold">+</span> gre , data <span style="color:#000;font-weight:bold">=</span> log, family <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;binomial&#34;</span>)
</span></span><span style="display:flex;"><span>log3 <span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">glm</span>(admit <span style="color:#000;font-weight:bold">~</span> gpa <span style="color:#000;font-weight:bold">+</span> gre <span style="color:#000;font-weight:bold">+</span> rank, data <span style="color:#000;font-weight:bold">=</span> log, family <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;binomial&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">tab_model</span>(log1, log2, log3)
</span></span></code></pre></div><table style="border-collapse:collapse; border:none;">
<tr>
<th style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; ">
 
</th>
<th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">
admit
</th>
<th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">
admit
</th>
<th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">
admit
</th>
</tr>
<tr>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; ">
Predictors
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
Odds Ratios
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
CI
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
p
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
Odds Ratios
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
CI
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  col7">
p
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  col8">
Odds Ratios
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  col9">
CI
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  0">
p
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
(Intercept)
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.01
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.00 – 0.09
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
<strong>\<0.001</strong>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.01
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.00 – 0.06
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7">
<strong>\<0.001</strong>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8">
0.02
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9">
0.00 – 0.17
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0">
<strong>\<0.001</strong>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
gpa
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
2.86
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
1.61 – 5.20
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
<strong>\<0.001</strong>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
2.13
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
1.14 – 4.02
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7">
<strong>0.018</strong>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8">
2.23
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9">
1.17 – 4.32
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0">
<strong>0.015</strong>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
gre
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
1.00
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
1.00 – 1.00
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7">
<strong>0.011</strong>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8">
1.00
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9">
1.00 – 1.00
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0">
<strong>0.038</strong>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
rank \[2\]
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8">
0.51
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9">
0.27 – 0.94
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0">
<strong>0.033</strong>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
rank \[3\]
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8">
0.26
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9">
0.13 – 0.51
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0">
<strong>\<0.001</strong>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
rank \[4\]
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8">
0.21
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9">
0.09 – 0.47
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0">
<strong>\<0.001</strong>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;">
Observations
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3">
400
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3">
400
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3">
400
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;">
R<sup>2</sup> Tjur
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="3">
0.032
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="3">
0.047
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="3">
0.102
</td>
</tr>
</table>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#900;font-weight:bold">anova</span>(log1, log2, log3, test<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;Chisq&#34;</span>)
</span></span></code></pre></div><pre><code>## Analysis of Deviance Table
## 
## Model 1: admit ~ gpa
## Model 2: admit ~ gpa + gre
## Model 3: admit ~ gpa + gre + rank
##   Resid. Df Resid. Dev Df Deviance  Pr(&gt;Chi)    
## 1       398     486.97                          
## 2       397     480.34  1   6.6236   0.01006 *  
## 3       394     458.52  3  21.8265 7.088e-05 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
</code></pre>
<p>Based on the ANOVA results, we see that the addition of each additional predictor signficnalty improves the prediction of graduate school admission.
Note, you don’t have to do this, but if you have research questions about the specific predictive power, controloing for the others, you can use this apporach.</p>




<h2 id="the-api-example">The API Example
  <a href="#the-api-example"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>Data from 
<a href="https://stats.idre.ucla.edu/r/seminars/introduction-to-regression-in-r/" target="_blank" rel="noopener">UCLA - Academic Performance Index</a>.
Note: This is the same example as the simple linear regression lab (Lab 5).
However, we are changing the model to have a binary outcome for logistic regression.
Below is the list of variables we used in this analysis for lab, noting that there are more variables in the API dataset.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td>api00</td>
<td>Academic Performance Index, 0 = under statewide target of 800, 1 = above 800, <em>binary</em></td>
</tr>
<tr>
<td>enroll</td>
<td>School enrollment, <em>continuous</em></td>
</tr>
<tr>
<td>Meals</td>
<td>Number of free and reduced lunch, <em>continuous</em></td>
</tr>
<tr>
<td>full</td>
<td>Percentage of teachers will full credentials, <em>continuous</em></td>
</tr>
</tbody>
</table>




<h3 id="read-in-data-1">Read in data
  <a href="#read-in-data-1"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Here, we are reading in the data directly from the UCLA website.
Additionally, we are dichotomizing the API (<code>api00</code>) variable to separate schools above statewide target of 800 and below.
This cut-off may be outdated and/or controversial, however, we are going to use this for the purpose of providing an example of how to do logistic regression in R.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>api <span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">read.csv</span>(
</span></span><span style="display:flex;"><span><span style="color:#d14">&#34;https://stats.idre.ucla.edu/wp-content/uploads/2019/02/elemapi2v2.csv&#34;</span>) <span style="color:#000;font-weight:bold">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#900;font-weight:bold">select</span>(api00, full, enroll, meals) <span style="color:#000;font-weight:bold">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#900;font-weight:bold">mutate</span>(api_factor <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">cut</span>(api00,
</span></span><span style="display:flex;"><span>                     levels <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">c</span>(<span style="color:#d14">&#34;0&#34;</span>, <span style="color:#d14">&#34;1&#34;</span>),
</span></span><span style="display:flex;"><span>                     breaks <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">c</span>(<span style="color:#099">0</span>, <span style="color:#099">800</span>, <span style="color:#099">940</span>),
</span></span><span style="display:flex;"><span>                     labels <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">c</span>(<span style="color:#d14">&#34;Below Target&#34;</span>, <span style="color:#d14">&#34;At or Above Target&#34;</span>))) <span style="color:#998;font-style:italic"># here we are dichotomizing API, see lab 1 for a refresher on what this all does.</span>
</span></span></code></pre></div>



<h3 id="summary-1">Summary
  <a href="#summary-1"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>For a short descriptor of each variable, scroll down 
<a href="https://stats.idre.ucla.edu/spss/webbooks/reg/chapter1/regressionwith-spsschapter-1-simple-and-multiple-regression/" target="_blank" rel="noopener">here</a>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># psych::describe()</span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">round</span>(<span style="color:#900;font-weight:bold">describe</span>(api),<span style="color:#099">2</span>) <span style="color:#000;font-weight:bold">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#900;font-weight:bold">pander</span>() 
</span></span></code></pre></div><table>
<thead>
<tr>
<th style="text-align:center"> </th>
<th style="text-align:center">vars</th>
<th style="text-align:center">n</th>
<th style="text-align:center">mean</th>
<th style="text-align:center">sd</th>
<th style="text-align:center">median</th>
<th style="text-align:center">trimmed</th>
<th style="text-align:center">mad</th>
<th style="text-align:center">min</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>api00</strong></td>
<td style="text-align:center">1</td>
<td style="text-align:center">400</td>
<td style="text-align:center">647.6</td>
<td style="text-align:center">142.2</td>
<td style="text-align:center">643</td>
<td style="text-align:center">645.8</td>
<td style="text-align:center">177.2</td>
<td style="text-align:center">369</td>
</tr>
<tr>
<td style="text-align:center"><strong>full</strong></td>
<td style="text-align:center">2</td>
<td style="text-align:center">400</td>
<td style="text-align:center">84.55</td>
<td style="text-align:center">14.95</td>
<td style="text-align:center">88</td>
<td style="text-align:center">86.6</td>
<td style="text-align:center">14.83</td>
<td style="text-align:center">37</td>
</tr>
<tr>
<td style="text-align:center"><strong>enroll</strong></td>
<td style="text-align:center">3</td>
<td style="text-align:center">400</td>
<td style="text-align:center">483.5</td>
<td style="text-align:center">226.4</td>
<td style="text-align:center">435</td>
<td style="text-align:center">459.4</td>
<td style="text-align:center">202.4</td>
<td style="text-align:center">130</td>
</tr>
<tr>
<td style="text-align:center"><strong>meals</strong></td>
<td style="text-align:center">4</td>
<td style="text-align:center">400</td>
<td style="text-align:center">60.31</td>
<td style="text-align:center">31.91</td>
<td style="text-align:center">67.5</td>
<td style="text-align:center">62.18</td>
<td style="text-align:center">37.81</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center"><strong>api_factor</strong>*</td>
<td style="text-align:center">5</td>
<td style="text-align:center">400</td>
<td style="text-align:center">1.19</td>
<td style="text-align:center">0.39</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1.12</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
</tbody>
</table>
<p>Table continues below</p>
<table>
<thead>
<tr>
<th style="text-align:center"> </th>
<th style="text-align:center">max</th>
<th style="text-align:center">range</th>
<th style="text-align:center">skew</th>
<th style="text-align:center">kurtosis</th>
<th style="text-align:center">se</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>api00</strong></td>
<td style="text-align:center">940</td>
<td style="text-align:center">571</td>
<td style="text-align:center">0.1</td>
<td style="text-align:center">-1.13</td>
<td style="text-align:center">7.11</td>
</tr>
<tr>
<td style="text-align:center"><strong>full</strong></td>
<td style="text-align:center">100</td>
<td style="text-align:center">63</td>
<td style="text-align:center">-0.97</td>
<td style="text-align:center">0.17</td>
<td style="text-align:center">0.75</td>
</tr>
<tr>
<td style="text-align:center"><strong>enroll</strong></td>
<td style="text-align:center">1570</td>
<td style="text-align:center">1440</td>
<td style="text-align:center">1.34</td>
<td style="text-align:center">3.02</td>
<td style="text-align:center">11.32</td>
</tr>
<tr>
<td style="text-align:center"><strong>meals</strong></td>
<td style="text-align:center">100</td>
<td style="text-align:center">100</td>
<td style="text-align:center">-0.41</td>
<td style="text-align:center">-1.2</td>
<td style="text-align:center">1.6</td>
</tr>
<tr>
<td style="text-align:center"><strong>api_factor</strong>*</td>
<td style="text-align:center">2</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1.55</td>
<td style="text-align:center">0.42</td>
<td style="text-align:center">0.02</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># I like this table more, but you can do either! Especially if you&#39;re getting some errors with gtsummary(). Useful when you have a subset, but here we left all variables in the sample so it&#39;s a long table. </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># gtsummary::gtsummary()</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#tbl_summary(api,</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#            statistic = list(all_continuous() ~ &#34;{mean} ({sd})&#34;),</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#                             missing = &#34;no&#34;)</span>
</span></span></code></pre></div><p>There is no contingency table in this example because all of our predictors are continuous.</p>




<h3 id="binary-logistic-model-1">Binary Logistic Model
  <a href="#binary-logistic-model-1"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>We are using a binary logistic regression model to see how school characteristics relate to a school making adequate progress (api=1) or not (api=0).</p>
<p>Binary outcome: API adequate progress =1, not adequate progress=0 Predictors: % fully credential teachers, student enrollment, and % on free and reduced lunch</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>mylogit <span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">glm</span>(api_factor <span style="color:#000;font-weight:bold">~</span> full <span style="color:#000;font-weight:bold">+</span> enroll <span style="color:#000;font-weight:bold">+</span> meals, data <span style="color:#000;font-weight:bold">=</span> api, family <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;binomial&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">summary</span>(mylogit)
</span></span></code></pre></div><pre><code>## 
## Call:
## glm(formula = api_factor ~ full + enroll + meals, family = &quot;binomial&quot;, 
##     data = api)
## 
## Deviance Residuals: 
##      Min        1Q    Median        3Q       Max  
## -1.86557  -0.16221  -0.03269  -0.01028   3.12996  
## 
## Coefficients:
##               Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -3.0746093  2.7320279  -1.125   0.2604    
## full         0.0582641  0.0282187   2.065   0.0389 *  
## enroll       0.0004592  0.0013843   0.332   0.7401    
## meals       -0.1096184  0.0144185  -7.603  2.9e-14 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 391.86  on 399  degrees of freedom
## Residual deviance: 147.45  on 396  degrees of freedom
## AIC: 155.45
## 
## Number of Fisher Scoring iterations: 8
</code></pre>




<h3 id="odds-ratios-1">Odds Ratios
  <a href="#odds-ratios-1"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#900;font-weight:bold">exp</span>(<span style="color:#900;font-weight:bold">coef</span>(mylogit))
</span></span></code></pre></div><pre><code>## (Intercept)        full      enroll       meals 
##  0.04620768  1.05999495  1.00045932  0.89617604
</code></pre>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#998;font-style:italic">## odds ratios and 95% CI</span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">exp</span>(<span style="color:#900;font-weight:bold">cbind</span>(OR <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">coef</span>(mylogit), <span style="color:#900;font-weight:bold">confint</span>(mylogit)))
</span></span></code></pre></div><pre><code>##                     OR        2.5 %    97.5 %
## (Intercept) 0.04620768 0.0001656294 7.8435280
## full        1.05999495 1.0055761469 1.1237801
## enroll      1.00045932 0.9978836793 1.0032716
## meals       0.89617604 0.8684201733 0.9192615
</code></pre>




<h3 id="predicted-probability-1">Predicted Probability
  <a href="#predicted-probability-1"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#998;font-style:italic">#creating the means of each variable</span>
</span></span><span style="display:flex;"><span>pred_prob_api<span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">with</span>(api, <span style="color:#900;font-weight:bold">data.frame</span>(full <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">mean</span>(full), enroll <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">mean</span>(enroll), meals <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">mean</span>(meals)))
</span></span><span style="display:flex;"><span>pred_prob_api
</span></span></code></pre></div><pre><code>##    full  enroll  meals
## 1 84.55 483.465 60.315
</code></pre>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>pred_prob_api<span style="color:#000;font-weight:bold">$</span>apiP<span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">predict</span>(mylogit, newdata <span style="color:#000;font-weight:bold">=</span> pred_prob_api, type <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;response&#34;</span>)
</span></span><span style="display:flex;"><span>pred_prob_api
</span></span></code></pre></div><pre><code>##    full  enroll  meals       apiP
## 1 84.55 483.465 60.315 0.01058167
</code></pre>
<p>This result says that for schools that have average on all the predictors, the probablity of being at target is .01.
<em>yikes!</em></p>




<h3 id="classification-table-1">Classification Table
  <a href="#classification-table-1"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># Converting from probability to actual output</span>
</span></span><span style="display:flex;"><span>api<span style="color:#000;font-weight:bold">$</span>fitted_api <span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">ifelse</span>(mylogit<span style="color:#000;font-weight:bold">$</span>fitted.values <span style="color:#000;font-weight:bold">&gt;=</span> <span style="color:#099">0.5</span>, <span style="color:#d14">&#34;1&#34;</span>, <span style="color:#d14">&#34;0&#34;</span>) <span style="color:#998;font-style:italic">#1 = Above Average, 0 = Below</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># Generating the classification table</span>
</span></span><span style="display:flex;"><span>ctab <span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">table</span>(api<span style="color:#000;font-weight:bold">$</span>api_factor, api<span style="color:#000;font-weight:bold">$</span>fitted_api)
</span></span><span style="display:flex;"><span>ctab
</span></span></code></pre></div><pre><code>##                     
##                        0   1
##   Below Target       304  19
##   At or Above Target  15  62
</code></pre>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#998;font-style:italic">#I (Karen) like this table better because it include row and column totals</span>
</span></span><span style="display:flex;"><span>sjPlot<span style="color:#000;font-weight:bold">::</span><span style="color:#900;font-weight:bold">tab_xtab</span>(var.row <span style="color:#000;font-weight:bold">=</span> api<span style="color:#000;font-weight:bold">$</span>api_factor, var.col <span style="color:#000;font-weight:bold">=</span> api<span style="color:#000;font-weight:bold">$</span>fitted_api, title <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;Observed Progress versus Predited progress counts&#34;</span>, show.row.prc <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">TRUE</span>, show.summary <span style="color:#000;font-weight:bold">=</span> <span style="color:#999">F</span> )
</span></span></code></pre></div><table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">
Observed Progress versus Predited progress counts
</caption>
<tr>
<th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; border-bottom:1px solid;" rowspan="2">
api_factor
</th>
<th style="border-top:double; text-align:center; font-style:italic; font-weight:normal;" colspan="2">
fitted_api
</th>
<th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; font-weight:bolder; font-style:italic; border-bottom:1px solid; " rowspan="2">
Total
</th>
</tr>
<tr>
<td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">
0
</td>
<td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">
1
</td>
</tr>
<tr>
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">
Below Target
</td>
<td style="padding:0.2cm; text-align:center; ">
<span style="color:black;">304</span><br><span style="color:#333399;">94.1 %</span>
</td>
<td style="padding:0.2cm; text-align:center; ">
<span style="color:black;">19</span><br><span style="color:#333399;">5.9 %</span>
</td>
<td style="padding:0.2cm; text-align:center;  ">
<span style="color:black;">323</span><br><span style="color:#333399;">100 %</span>
</td>
</tr>
<tr>
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">
At or Above Target
</td>
<td style="padding:0.2cm; text-align:center; ">
<span style="color:black;">15</span><br><span style="color:#333399;">19.5 %</span>
</td>
<td style="padding:0.2cm; text-align:center; ">
<span style="color:black;">62</span><br><span style="color:#333399;">80.5 %</span>
</td>
<td style="padding:0.2cm; text-align:center;  ">
<span style="color:black;">77</span><br><span style="color:#333399;">100 %</span>
</td>
</tr>
<tr>
<td style="padding:0.2cm;  border-bottom:double; font-weight:bolder; font-style:italic; text-align:left; vertical-align:middle;">
Total
</td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;">
<span style="color:black;">319</span><br><span style="color:#333399;">79.8 %</span>
</td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;">
<span style="color:black;">81</span><br><span style="color:#333399;">20.2 %</span>
</td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;">
<span style="color:black;">400</span><br><span style="color:#333399;">100 %</span>
</td>
</tr>
</table>




<h3 id="accuracy-1">Accuracy
  <a href="#accuracy-1"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>accuracy <span style="color:#000;font-weight:bold">&lt;-</span> <span style="color:#900;font-weight:bold">sum</span>(<span style="color:#900;font-weight:bold">diag</span>(ctab))<span style="color:#000;font-weight:bold">/</span><span style="color:#900;font-weight:bold">sum</span>(ctab)<span style="color:#000;font-weight:bold">*</span><span style="color:#099">100</span>
</span></span><span style="display:flex;"><span>accuracy
</span></span></code></pre></div><pre><code>## [1] 91.5
</code></pre>




<h2 id="sample-write-up">Sample write up
  <a href="#sample-write-up"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>Using a binary logistic regression, we explored how school’s characteristics (% fully credential teachers, studnet enrollment, and % on free and reduced lunch) relate to the adequate progress of a school.
Both the percent of credentialed teachers (<em>z</em> = 2.06, <em>p</em> = .04) and the % free and reduced lunch (<em>z</em> = -.11, <em>p</em> &lt; .01) were significant predictors.
Specifically the percent of fully credentialed teachers has an <em>OR</em> = 1.05, 95%CI[1.01, 1.12].
This implies that for a one percent increase in the fully credentialed teachers, schools have a 5% higher chance of making target.
Free and reduced lunch had estimated <em>OR</em> =.90, 95% CI [.86, .92], which indicated that for each additional percent of students on free and reduced lunch, there is a significant decrease in the log odds of being at target (<em>z</em> = -7.60, <em>p</em> &lt; .01).
That is, for each additional percent increase of free or reduced lunch, that school has a 11% decrease in the odds of making it to target growth, controlling for the other predictors.
There was no effect of the enrollment of the school, when controlling for the other variables.
Overall, this model had high prediction accuracy, predicting 91% schools accurately.</p>

        
        <details closed class="f6 fw7 input-reset">
  <dl class="f6 lh-copy">
    <dt class="fw7">Posted on:</dt>
    <dd class="fw5 ml0">May 30, 2021</dd>
  </dl>
  <dl class="f6 lh-copy">
    <dt class="fw7">Length:</dt>
    <dd class="fw5 ml0">18 minute read, 3664 words</dd>
  </dl>
  
  <dl class="f6 lh-copy">
    <dt class="fw7">Categories:</dt>
    <dd class="fw5 ml0"> <a href="https://www.dina-arch.com/categories/statistics">statistics</a>  <a href="https://www.dina-arch.com/categories/r">r</a> </dd>
  </dl>
  
  
  
  <dl class="f6 lh-copy">
    <dt class="fw7">Tags:</dt>
    <dd class="fw5 ml0"> <a href="https://www.dina-arch.com/tags/r-markdown">r markdown</a>  <a href="https://www.dina-arch.com/tags/binary-regression">binary regression</a>  <a href="https://www.dina-arch.com/tags/labs">labs</a>  <a href="https://www.dina-arch.com/tags/odds-ratios">odds ratios</a>  <a href="https://www.dina-arch.com/tags/classification">classification</a> </dd>
  </dl>
  
  <dl class="f6 lh-copy">
    <dt class="fw7">See Also:</dt>
    
    <dd class="fw5 ml0"><a href="/collection/intro-r-mplus/">Introduction to R, Mplus, and MplusAutomation</a></dd>
    
    <dd class="fw5 ml0"><a href="/collection/tips-and-tricks-in-r/">Data Wrangling in R</a></dd>
    
    <dd class="fw5 ml0"><a href="/collection/machine_learning/">Machine Learning Course Project</a></dd>
    
  </dl>
</details>

      </section>
      <footer class="post-footer">
        <div class="post-pagination dt w-100 mt4 mb2">
  
  
  
  
    <a class="next dtc pl2 tr v-top fw6"
    href="https://www.dina-arch.com/project/giraffes/">Tachyons for Style &rarr;</a>
  
</div>

      </footer>
    </article>
    
  </section>
</main>
<footer class="site-footer pv4 bt b--transparent ph5" role="contentinfo">
  <nav class="db dt-l w-100">
    <p class="site-copyright f7 db dtc-l v-mid w-100 w-33-l tc tl-l pv2 pv0-l mv0 lh-copy">
      &copy; 2022 Dina Arch
      <span class="middot-divider"></span>
      Made with <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/hugo-apero/" rel="dct:source">Hugo Apéro</a></span>.
      <br />
      
Based on <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/formspree/blogophonic-hugo" rel="dct:source">Blogophonic</a></span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://formspree.io" property="cc:attributionName" rel="cc:attributionURL">Formspree</a>.
    </p>
    
    <div class="site-social-links db dtc-l v-mid w-100 w-33-l tc pv2 pv0-l mv0">
      <div class="social-icon-links" aria-hidden="true">
  
  
    
    
    
      
    
    
    
    
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="mailto:dnaji@ucsb.edu" title="envelope" >
      <i class="fas fa-envelope fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://github.com/dinanajiarch" title="github" target="_blank" rel="noopener">
      <i class="fab fa-github fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://twitter.com/dnajiarch" title="twitter" target="_blank" rel="noopener">
      <i class="fab fa-twitter fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.linkedin.com/in/dina-naji-arch-22649396/" title="linkedin" target="_blank" rel="noopener">
      <i class="fab fa-linkedin fa-lg fa-fw"></i>
    </a>
  
    
    
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://orcid.org/0000-0002-2716-0798" title="orcid" target="_blank" rel="noopener">
      <i class="ai ai-orcid fa-lg fa-fw"></i>
    </a>
  
</div>

    </div>
    
    <div class="site-links f6 db dtc-l v-mid w-100 w-67-l tc tr-l pv2 pv0-l mv0">
      
    </div>
  </nav>
  
    <script>

    var i, text, code, codes = document.getElementsByTagName('code');
    for (let i = 0; i < codes.length;) {
      code = codes[i];
      if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
        text = code.textContent;
        if (/^\$[^$]/.test(text) && /[^$]\$$/.test(text)) {
          text = text.replace(/^\$/, '\\(').replace(/\$$/, '\\)');
          code.textContent = text;
        }
        if (/^\\\((.|\s)+\\\)$/.test(text) ||
            /^\\\[(.|\s)+\\\]$/.test(text) ||
            /^\$(.|\s)+\$$/.test(text) ||
            /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
          code.outerHTML = code.innerHTML;  
          continue;
        }
      }
      i++;
    }
</script>

  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>



    
  
  
</footer>

      </div>
    </body>
</html>
